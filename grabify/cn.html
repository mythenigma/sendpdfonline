<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grabify - Advanced IP & URL Tracker</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg-color: #1f1f3a;
            --primary-text-color: #e0e0e0;
            --secondary-text-color: #a0a0c0;
            --accent-gradient: linear-gradient(90deg, #114FEE, #C835F8);
            --border-color: rgba(255, 255, 255, 0.1);
            --shadow-color: rgba(0, 0, 0, 0.3);
            --glow-color: rgba(100, 100, 255, 0.4);
            --success-color: #2ecc71;
            --danger-color: #e74c3c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--primary-text-color);
            line-height: 1.7;
            min-height: 100vh;
        }

        .navbar {
            background-color: rgba(31, 31, 58, 0.95) !important;
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 0;
            transition: all 0.3s ease;
        }
        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .navbar-nav .nav-link {
            color: var(--secondary-text-color) !important;
            font-weight: 500;
            margin: 0 0.5rem;
            padding: 0.5rem 0.75rem !important;
            transition: color 0.3s ease;
        }
        .navbar-nav .nav-link:hover { color: white !important; }

        .main-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header {
            text-align: center;
            padding: 120px 20px 80px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .header p {
            font-size: 1.1rem;
            color: var(--secondary-text-color);
            margin: 0 auto;
            max-width: 600px;
        }

        .section {
            background: var(--card-bg-color);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px var(--shadow-color);
        }

        .section h3 {
            color: var(--primary-text-color);
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-control, .form-select {
            border-radius: 10px;
            border: 1px solid var(--border-color);
            padding: 0.9rem 1.2rem;
            font-size: 1rem;
            background-color: var(--bg-color);
            color: var(--primary-text-color);
            transition: all 0.3s ease;
        }

        .form-control:focus, .form-select:focus {
            background-color: var(--bg-color);
            color: var(--primary-text-color);
            border-color: #8e44ad;
            box-shadow: 0 0 15px var(--glow-color) !important;
            outline: none;
        }

        .btn {
            border-radius: 10px;
            padding: 0.9rem 1.2rem;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            text-transform: none;
        }

        .btn-primary {
            background: var(--accent-gradient);
            color: white !important;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--glow-color);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-warning {
            background: #f59e0b;
            color: white;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .form-range {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            max-width: 400px;
            height: 15px;
            background: var(--bg-color);
            outline: none;
            opacity: 0.8;
            transition: opacity .2s;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            cursor: pointer;
        }
        .form-range:hover { opacity: 1; }
        .form-range::-webkit-slider-thumb { 
            -webkit-appearance: none; 
            appearance: none; 
            width: 25px; 
            height: 25px; 
            background: #C835F8; 
            border-radius: 50%; 
            cursor: pointer; 
            box-shadow: 0 0 10px var(--glow-color); 
        }
        .form-range::-moz-range-thumb { 
            width: 25px; 
            height: 25px; 
            background: #C835F8; 
            border-radius: 50%; 
            cursor: pointer; 
            box-shadow: 0 0 10px var(--glow-color); 
        }

        .progress {
            height: 8px;
            border-radius: 10px;
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            margin: 20px 0;
        }

        .progress-bar {
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .img-tutorial {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 10px 30px var(--shadow-color);
            margin: 20px 0;
        }

        .result-box {
            padding: 1.5rem;
            margin-top: 2rem;
            border-radius: 15px;
            background-color: var(--card-bg-color);
            border: 1px solid var(--border-color);
            display: none;
        }

        .result-box.show {
            display: block;
        }

        .copy-btn {
            margin-left: 10px;
        }

        .footer {
            background: #161625;
            color: var(--primary-text-color);
            text-align: center;
            padding: 3rem 0;
            border-top: 1px solid var(--border-color);
        }

        .footer a {
            color: var(--secondary-text-color);
            text-decoration: none;
            margin: 0 0.5rem;
            transition: color 0.3s ease;
        }

        .footer a:hover {
            color: white;
        }

        .alert {
            border-radius: 10px;
            border: 1px solid var(--border-color);
            padding: 15px 20px;
            background-color: var(--card-bg-color);
            color: var(--primary-text-color);
        }

        .feature-card {
            background: var(--card-bg-color);
            border-radius: 15px;
            padding: 2rem;
            border: 1px solid var(--border-color);
            height: 100%;
            transition: all 0.3s ease;
        }
        .feature-card:hover { 
            transform: translateY(-10px); 
            box-shadow: 0 15px 40px var(--shadow-color); 
        }
        .feature-icon { 
            font-size: 3rem; 
            background: var(--accent-gradient); 
            -webkit-background-clip: text; 
            background-clip: text; 
            color: transparent; 
            margin-bottom: 1.5rem; 
        }
        .feature-title { 
            font-size: 1.5rem; 
            font-weight: 600; 
            margin-bottom: 1rem; 
            color: var(--primary-text-color); 
        }

        .section-title { 
            font-size: 2.5rem; 
            font-weight: 600; 
            margin-bottom: 1rem; 
            text-align: center;
        }
        .section-subtitle { 
            color: var(--secondary-text-color); 
            margin-bottom: 3rem; 
            max-width: 600px; 
            margin-left: auto; 
            margin-right: auto;
            text-align: center;
        }

        @media (max-width: 768px) {
            .main-container {
                margin: 0 10px;
            }
            
            .section {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
        }    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#page-top"><i class="fas fa-crosshairs"></i> Grabify IP Tracker</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#url">URL Tracking</a></li>
                    <li class="nav-item"><a class="nav-link" href="#email">Email Tracking</a></li>
                    <li class="nav-item"><a class="nav-link" href="#ip-lookup">IP Lookup</a></li>
                    <li class="nav-item"><a class="nav-link" href="#qr-generator">QR Generator</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <div class="header">
            <h1><i class="fas fa-crosshairs"></i> Grabify IP Tracker</h1>
            <p>Advanced URL & Email Tracking Solution - Monitor clicks, track IPs, and analyze user behavior with precision</p>
        </div>

        <div style="padding: 40px 20px;">
            <!-- Features Overview -->
            <div class="row g-4 mb-5">
                <div class="col-md-3">
                    <div class="feature-card text-center">
                        <i class="fas fa-link feature-icon"></i>
                        <h3 class="feature-title" style="font-size: 1.2rem;">URL Tracking</h3>
                        <p style="color: var(--secondary-text-color);">Create trackable links</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="feature-card text-center">
                        <i class="fas fa-envelope feature-icon"></i>
                        <h3 class="feature-title" style="font-size: 1.2rem;">Email Tracking</h3>
                        <p style="color: var(--secondary-text-color);">Track email opens</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="feature-card text-center">
                        <i class="fas fa-search feature-icon"></i>
                        <h3 class="feature-title" style="font-size: 1.2rem;">IP Lookup</h3>
                        <p style="color: var(--secondary-text-color);">Get IP information</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="feature-card text-center">
                        <i class="fas fa-qrcode feature-icon"></i>
                        <h3 class="feature-title" style="font-size: 1.2rem;">QR Codes</h3>
                        <p style="color: var(--secondary-text-color);">Generate QR codes</p>
                    </div>
                </div>
            </div>            <!-- URL Tracking Section -->
            <div class="section" id="url">
                <h3><i class="fas fa-link" style="background: var(--accent-gradient); -webkit-background-clip: text; background-clip: text; color: transparent;"></i> URL Tracking</h3>
                <p style="color: var(--secondary-text-color); margin-bottom: 2rem;">Create a tracking link to capture visitor information when they click on it.</p>
                
                <div class="row">
                    <div class="col-md-8">
                        <label for="webinput" class="form-label">Enter Full URL:</label>
                        <input type="url" class="form-control" id="webinput" placeholder="https://example.com" value="https://" required>
                    </div>
                    <div class="col-md-4">
                        <label for="urltype" class="form-label">Link Type:</label>
                        <select class="form-select" id="urltype">
                            <option value="grabb.site">grabb.site</option>
                            <option value="grabify.icu">grabify.icu</option>
                        </select>
                    </div>
                </div>

                <div class="mt-4">
                    <input type="range" class="form-range" id="myRange" min="1" max="100" value="1">
                    <div id="rangeValue" style="color: var(--secondary-text-color); font-size: 1rem; margin-top: 1rem; transition: color 0.3s ease;">Drag Progress Bar to the End</div>
                </div>

                <button type="button" class="btn btn-primary mt-3" onclick="makeCodeweb()">
                    <i class="fas fa-magic"></i> Generate Tracking URL/QR
                </button>

                <div id="loadingdot" style="display:none; margin-top: 20px;">
                    <div class="text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p style="color: var(--secondary-text-color); margin-top: 10px;">Generating tracking link...</p>
                    </div>
                </div>

                <div id="xingxi-container" class="result-box">
                    <div class="row align-items-center">
                        <div class="col-12 col-md-7">
                            <div id="atype" style="margin-bottom: 1rem; word-break: break-all;"></div>
                            <div id="btypesay" style="margin-bottom: 1rem; color: var(--secondary-text-color);"></div>
                            <div id="btype" style="word-break: break-all;"></div>
                        </div>
                        <div class="col-12 col-md-5 text-center">
                            <div id="qrcodeweb" style="padding: 10px; background: white; border-radius: 10px; display: inline-block; margin: 20px 0;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Email Tracking Section -->
            <div class="section" id="email">
                <h3><i class="fas fa-envelope" style="background: var(--accent-gradient); -webkit-background-clip: text; background-clip: text; color: transparent;"></i> Email Tracking</h3>
                <p style="color: var(--secondary-text-color); margin-bottom: 2rem;">Track when someone opens your email by embedding an invisible tracking pixel.</p>
                
                <div class="row">
                    <div class="col-md-8">
                        <label for="email" class="form-label">Your Email Address:</label>
                        <input type="email" class="form-control" id="email" placeholder="your@email.com" required>
                    </div>
                    <div class="col-md-4">
                        <label for="emailtype" class="form-label">Tracking Type:</label>
                        <select class="form-select" id="emailtype">
                            <option value="pixel">Tracking Pixel</option>
                            <option value="link">Tracking Link</option>
                        </select>
                    </div>
                </div>                <button type="button" class="btn btn-success mt-3" onclick="makeCodeweb2()">
                    <i class="fas fa-paper-plane"></i> Generate Email Tracker
                </button>

                <div id="resultEmail" class="result-box">
                    <h5><i class="fas fa-check-circle" style="color: var(--success-color);"></i> Email Tracker Generated!</h5>
                    <div class="input-group mt-3">
                        <input type="text" class="form-control" id="generatedEmail" readonly>
                        <button class="btn btn-outline-success copy-btn" onclick="copyToClipboard('generatedEmail')">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                    </div>
                    <p class="mt-2" style="color: var(--secondary-text-color);">
                        <i class="fas fa-info-circle"></i> 
                        Embed this code in your email. Access code: <strong id="emailAccessCode"></strong>
                    </p>
                </div>
            </div>

            <!-- Tutorial Section -->
            <div class="section">
                <h3><i class="fas fa-graduation-cap" style="background: var(--accent-gradient); -webkit-background-clip: text; background-clip: text; color: transparent;"></i> How to Use</h3>
                <div class="row">
                    <div class="col-md-6">
                        <h5 style="color: var(--primary-text-color);">1. Create Tracking Link</h5>
                        <img src="https://grabify.icu/ok/top.png" alt="Create tracking link" class="img-tutorial">
                        <p style="color: var(--secondary-text-color);">Enter the URL you want to track and select your preferred domain.</p>
                    </div>
                    <div class="col-md-6">
                        <h5 style="color: var(--primary-text-color);">2. Share & Monitor</h5>
                        <img src="https://grabify.icu/ok/howto.png" alt="Monitor results" class="img-tutorial">
                        <p style="color: var(--secondary-text-color);">Share the generated link and monitor visitor data in real-time.</p>
                    </div>
                </div>
            </div>

            <!-- IP Information Section -->
            <div class="section" id="ip-lookup">
                <h3><i class="fas fa-search" style="background: var(--accent-gradient); -webkit-background-clip: text; background-clip: text; color: transparent;"></i> IP Information Lookup</h3>
                <p style="color: var(--secondary-text-color); margin-bottom: 2rem;">Look up detailed information about any IP address.</p>
                  <div class="input-group">
                    <input type="text" class="form-control" id="ipLookup" placeholder="Enter IP address (e.g., 8.8.8.8)">
                    <button class="btn btn-primary" onclick="lookupIP()">
                        <i class="fas fa-search"></i> Lookup
                    </button>
                </div>

                <div id="ipResult" class="result-box">
                    <div id="ipInfo"></div>
                </div>
            </div>

            <!-- QR Code Generator -->
            <div class="section" id="qr-generator">
                <h3><i class="fas fa-qrcode" style="background: var(--accent-gradient); -webkit-background-clip: text; background-clip: text; color: transparent;"></i> QR Code Generator</h3>
                <p style="color: var(--secondary-text-color); margin-bottom: 2rem;">Generate QR codes for your tracking links.</p>
                
                <div class="input-group">
                    <input type="text" class="form-control" id="qrInput" placeholder="Enter URL or text">
                    <button class="btn btn-primary" onclick="generateQR()">
                        <i class="fas fa-qrcode"></i> Generate QR
                    </button>
                </div>                <div id="qrResult" class="text-center mt-3" style="display: none;">
                    <div style="padding: 10px; background: white; border-radius: 10px; display: inline-block; margin: 20px 0;">
                        <div id="qrCanvas"></div>
                    </div>
                    <br>
                    <button class="btn btn-outline-primary mt-2" onclick="downloadQR()">
                        <i class="fas fa-download"></i> Download QR Code
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <h6 style="color: var(--primary-text-color);">Services</h6>
                        <a href="https://grabify.icu/" target="_blank">Grabify</a><br>
                        <a href="https://grabb.site/" target="_blank">Grabb.site</a>
                    </div>
                    <div class="col-md-3">
                        <h6 style="color: var(--primary-text-color);">Tools</h6>
                        <a href="https://iplogger.org/" target="_blank">IP Logger</a><br>
                        <a href="https://2no.co/" target="_blank">2no.co</a>
                    </div>
                    <div class="col-md-3">
                        <h6 style="color: var(--primary-text-color);">Support</h6>
                        <a href="https://blasze.tk/" target="_blank">Blasze</a><br>
                        <a href="https://yip.su/" target="_blank">Yip.su</a>
                    </div>
                    <div class="col-md-3">
                        <h6 style="color: var(--primary-text-color);">More</h6>
                        <a href="https://ps3cfw.com/" target="_blank">PS3CFW</a><br>
                        <a href="https://bmwforum.co/" target="_blank">BMW Forum</a>
                    </div>
                </div>
                <hr style="border-color: var(--border-color); margin: 2rem 0;">
                <p>&copy; 2024 Grabify IP Tracker. All rights reserved.</p>
            </div>
        </div>
    </div>    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="https://www.maipdf.com/pdf/qrcode.min.js"></script>
      <script>
        // Global variables
        let currentAccessCode = '';
        let currentEmailCode = '';
        let qrcode2;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize QR Code generator for URL tracking
            qrcode2 = new QRCode(document.getElementById("qrcodeweb"), {
                width: 170,
                height: 170,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });

            // Add range slider event listeners
            $('#myRange').on('input mousemove touchmove', function(){
                if($(this).val() == 100){
                    document.getElementById("rangeValue").innerHTML = "You're Good to Go";
                    document.getElementById("rangeValue").style.color = "var(--success-color)";
                } else {
                    document.getElementById("rangeValue").innerHTML = "Drag Progress Bar to the End";
                    document.getElementById("rangeValue").style.color = "var(--secondary-text-color)";
                }
            });

            // Add Enter key listeners
            document.getElementById('email').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    makeCodeweb2();
                }
            });
            
            document.getElementById('ipLookup').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    lookupIP();
                }
            });
            
            document.getElementById('qrInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    generateQR();
                }
            });
        });

        // Generate tracking link for URL (updated to match index.php)
        async function makeCodeweb() {
            document.getElementById("btypesay").innerHTML = '<div class="text-center"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>';
            
            const web = document.getElementById("webinput");
            
            if(web.value.length < 10) {
                alert('Seriously ?');
                return;
            }

            // Filter check
            let filterstrings = ['porn','redtube','81ea'];
            let regex = new RegExp(filterstrings.join("|"), "i");  
            if(regex.test(web.value)) {
                alert('Seriously ?'); 
                return;
            }

            // Check if slider is at 100
            if($('#myRange').val() != 100) {
                alert('Please Drag Progress bar to the End');
                return;
            }

            // Reset slider to 20 (as in original)
            const ranger20 = document.getElementById("myRange");
            ranger20.value = 20;
            document.getElementById("rangeValue").innerHTML = "Drag Progress Bar to the End";
            document.getElementById("rangeValue").style.color = "var(--secondary-text-color)";

            // Generate QR code for input URL
            qrcode2.makeCode(web.value);
            
            // Send request to qrcode.php
            const data = new FormData();
            data.append('i', web.value);
            
            try {
                const response = await fetch("qrcode.php", {
                    method: "POST",
                    body: data
                });
                
                const res = await response.text().then(text => text.trim());
                continuewithcode(res);
                
            } catch (error) {
                console.error('Error:', error);
                alert('Network error. Please try again.');
                document.getElementById("btypesay").innerHTML = '';
            }
        }

        // Continue with code processing (updated to match index.php)
        async function continuewithcode(res) {
            if (res.includes("Reachable")) {
                alert('Please Enter a Valid URL');
                document.getElementById("btypesay").innerHTML = '';
                return;
            }
            
            res = res.split(":");
            $("#xingxi-container").fadeOut("slow");
            
            const qd = "https://grabb.site/" + res[1];
            qrcode2.makeCode(qd);
            
            document.getElementById("atype").innerHTML = "New Grabify Link: <br>" + 
                "<a href='https://grabb.site/" + res[1] + "' target='_blank' style='color: var(--success-color); text-decoration: none; font-weight: 600;'>https://grabb.site/" + res[1] + "</a>";
            document.getElementById("btypesay").innerHTML = "Tracking Code: " + res[2];
            document.getElementById("btype").innerHTML = "Tracking Link: <br>" + 
                "<a href='https://grabify.icu/" + res[2] + "' target='_blank' style='color: var(--success-color); text-decoration: none; font-weight: 600;'>https://grabify.icu/" + res[2] + "</a>";
            
            // Store access code for continue function
            currentAccessCode = res[2];
            
            $("#xingxi-container").fadeIn("slow");
        }

        // Validate IP address (old format)
        function isValidIPold(ip) {
            const regex = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
            return regex.test(ip);
        }

        // Validate IP address (new format with IPv6 support)
        function isValidIP(ip) {
            // IPv4 validation
            const ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
            
            // IPv6 validation (simplified)
            const ipv6Regex = /^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/;
            
            return ipv4Regex.test(ip) || ipv6Regex.test(ip);
        }

        // Generate tracking code for email
        async function makeCodeweb2() {
            const email = document.getElementById('email').value;
            const emailtype = document.getElementById('emailtype').value;

            if (!email) {
                alert('Please enter an email address');
                return;
            }

            if (!email.includes('@')) {
                alert('Please enter a valid email address');
                return;
            }

            try {
                const response = await fetch('qrcode.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `action=generateEmail&email=${encodeURIComponent(email)}&type=${emailtype}`
                });

                const data = await response.json();
                
                if (data.success) {
                    currentEmailCode = data.code;
                    document.getElementById('generatedEmail').value = data.trackingCode;
                    document.getElementById('emailAccessCode').textContent = data.code;
                    document.getElementById('resultEmail').classList.add('show');
                } else {
                    alert('Error generating email tracker: ' + (data.message || 'Unknown error'));
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Network error. Please try again.');
            }
        }

        // Continue with email code
        function continuewithcode2() {
            if (currentEmailCode) {
                window.open(`https://grabify.icu/track/${currentEmailCode}`, '_blank');
            } else {
                alert('Please generate an email tracker first');
            }
        }

        // Copy text to clipboard
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            element.select();
            element.setSelectionRange(0, 99999);
            document.execCommand('copy');
            
            // Show feedback
            const button = event.target.closest('button');
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-check"></i> Copied!';
            button.style.background = 'var(--success-color)';
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.style.background = '';
            }, 2000);
        }

        // Lookup IP information
        async function lookupIP() {
            const ip = document.getElementById('ipLookup').value;
            
            if (!ip) {
                alert('Please enter an IP address');
                return;
            }

            if (!isValidIP(ip)) {
                alert('Please enter a valid IP address');
                return;
            }

            try {
                const response = await fetch(`https://grabify.icu/c.php?ip=${encodeURIComponent(ip)}`);
                const data = await response.json();
                
                if (data) {
                    document.getElementById('ipInfo').innerHTML = `
                        <h5><i class="fas fa-globe"></i> IP Information for ${ip}</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>Country:</strong> ${data.country || 'Unknown'}</p>
                                <p><strong>Region:</strong> ${data.region || 'Unknown'}</p>
                                <p><strong>City:</strong> ${data.city || 'Unknown'}</p>
                            </div>
                            <div class="col-md-6">
                                <p><strong>ISP:</strong> ${data.isp || 'Unknown'}</p>
                                <p><strong>Organization:</strong> ${data.org || 'Unknown'}</p>
                                <p><strong>Timezone:</strong> ${data.timezone || 'Unknown'}</p>
                            </div>
                        </div>
                    `;
                    document.getElementById('ipResult').classList.add('show');
                } else {
                    alert('Could not retrieve IP information');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error looking up IP information');
            }
        }

        // Generate QR Code (simple version for qr-generator section)
        function generateQR() {
            const text = document.getElementById('qrInput').value;
            
            if (!text) {
                alert('Please enter text or URL for QR code');
                return;
            }

            // Clear existing QR code
            document.getElementById('qrCanvas').innerHTML = '';
            
            // Create new QR code instance
            const qrGenerator = new QRCode(document.getElementById("qrCanvas"), {
                text: text,
                width: 200,
                height: 200,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
            
            document.getElementById('qrResult').style.display = 'block';
        }

        // Download QR Code
        function downloadQR() {
            const qrDiv = document.getElementById('qrCanvas');
            const canvas = qrDiv.querySelector('canvas');
            if (canvas) {
                const link = document.createElement('a');
                link.download = 'qrcode.png';
                link.href = canvas.toDataURL();
                link.click();
            }
        }
    </script>
</body>
</html>